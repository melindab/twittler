<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="main.css">
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
  </head>
  <body>
    <header>
       <h1>Twittler</h1>
    </header>

    <aside>
      <h2 class="profile">All Users</h2>
    </aside>

    <section class="main">
    </section>

    <footer>
    </footer>
   
    
    <script>

      $(document).ready(function() {
        var profile = "all";
        var index = 0; 
        var $section = $('section'); 
            
        var addTweets = function() {
          var count = streams.home.length;

          while(index <= count - 1) {
            var tweet = profile === "all" ? streams.home[index] : streams.users[profile][index];
            var $tweet = $('<div class="tweets"></div>');
            var username = '<p><a href="#" class=' + tweet.user + '>@' + tweet.user + '</a></p>';
            var timestamp = '<p>' + tweet.created_at + '</p>';
            var message = '<p>' + tweet.message + '</p>';
            
            $tweet.html(username + timestamp + message);
            $tweet.prependTo($section);
            index += 1;
          }

          index = streams.home.length;
          
          tweetIntervals();

        };

        var tweetIntervals = function() {
          setInterval(addTweets, 10000);
        }

        $('.main').on('click', 'a', function(event) {
          event.preventDefault();
          clearInterval(tweetIntervals);
          profile = $(this).attr('class');
          index = 0;
          $section.html('');
          addTweets();
        });
      
        addTweets();  

      });

    </script>
  </body>
</html>
